(function ($) {
    /**
     * Function to run when document is ready. It is also called when a parent DIV generated by Ajax action needs to trigger any events again
     */
    "use strict";
    var _ct_woo_color_swatch_document_ready = function(parentDiv = document){
		
		$('.variations_form').each(function(){
				
			if($('.ct-woo-extension.swatch-control').length > 0){
				$('.ct-woo-extension.swatch-control .select-option').on('click', function(){
					// remove active class of other options
					$('.select-option', $(this).parent()).removeClass('active');

					var attritube = $(this).attr('data-attribute');
					
					/** update value in select box **/
					$('#' + attritube).val($(this).attr('data-value'));
					$('#' + attritube).trigger('change');
					
					$(this).toggleClass('active');
				});
			};
			
			/** clear image selected if user resets variation **/
			$(this).on('reset_data', function(){
				$('.ct-woo-extension.swatch-control .select-option', $(this)).removeClass('active');
			});
			
		});
	};
	
	$(document).ready(function(){
		_ct_woo_color_swatch_document_ready();
	});
	
})(jQuery);